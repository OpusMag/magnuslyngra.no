<!doctype html>
<html lang="no">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="CV" />
    <meta name="author" content="Magnus Lyngra" />
    <title>Velkommen til Magnus nettside</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon_io/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon_io/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon_io/favicon-16x16.png">
    <link rel="manifest" href="/favicon_io/site.webmanifest">
    <link rel="stylesheet" href="w3.css">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="preload" href="cover.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="cover.css"></noscript>
    <style>
      body {
        margin: 0;
        overflow: hidden;
      }
      #gameCanvas {
        background: #000;
        display: block;
        margin: 0 auto;
      }
    </style>
  </head>
  <body class="text-center">
    <div class="cover-container">
      <header class="masthead">
        <!-- First navbar: visible on larger screens -->
        <nav class="nav nav-masthead">
          <a class="nav-link" href="index.html">Hjem</a>
          <a class="nav-link" href="ommeg.html">Om meg</a>
          <a class="nav-link" href="cv.html">CV</a>
          <a class="nav-link" href="kontakt.html">Kontakt</a>
          <a class="nav-link active" href="prosjekter.html">Prosjekter</a>
          <a class="nav-link" href="blogg.html">Blogg</a>
        </nav>
        <nav class="nav-mobile nav-masthead-mobile">
          <!-- Toggle button: visible on smaller screens -->
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <i class="fa fa-bars" aria-hidden="true"></i>
          </button>
        </nav>
      </header>
      <main>
        <canvas id="gameCanvas" width="800" height="400"></canvas>
      </main>
      <footer class="mastfoot">
        <div class="footer-button-container">
          <a href="https://github.com/OpusMag" class="footer-button">
            <i class="fa-brands fa-github"></i>
            <span class="sr-only">GitHub</span>
          </a>
          <a href="https://www.linkedin.com/in/magnuslyngra/" class="footer-button">
            <i class="fab fa-linkedin"></i>
            <span class="sr-only">LinkedIn</span>
          </a>
          <a href="https://soundcloud.com/opusmag" class="footer-button">
            <i class="fa-brands fa-soundcloud"></i>
            <span class="sr-only">SoundCloud</span>
          </a>
        </div>
      </footer>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
      window.jQuery || document.write('https://code.jquery.com/jquery-3.6.0.min.js"><\/script>');
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.9.3/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
      
        const playerImage = new Image();
        playerImage.src = 'media/character.png';
      
        const obstacleImage = new Image();
        obstacleImage.src = 'media/npc.png';
      
        let player = {
          x: 50,
          y: 300,
          width: 50,
          height: 50,
          dy: 0,
          gravity: 0.5,
          jumpPower: -15,
          grounded: true
        };
      
        let obstacles = [];
        let score = 0;
        let gameSpeed = 2;
        let gameOver = false;
      
        function createObstacle() {
          let obstacle = {
            x: canvas.width,
            y: 350,
            width: 50,
            height: 50
          };
          obstacles.push(obstacle);
        }
      
        function update() {
          if (gameOver) return;
      
          // Clear the canvas
          ctx.clearRect(0, 0, canvas.width, canvas.height);
      
          // Update player position
          player.dy += player.gravity;
          player.y += player.dy;
      
          // Check for ground collision
          if (player.y + player.height > canvas.height) {
            player.y = canvas.height - player.height;
            player.dy = 0;
            player.grounded = true;
          }
      
          // Draw player
          ctx.drawImage(playerImage, player.x, player.y, player.width, player.height);
      
          // Update and draw obstacles
          for (let i = 0; i < obstacles.length; i++) {
            let obstacle = obstacles[i];
            obstacle.x -= gameSpeed;
      
            // Check for collision
            if (player.x < obstacle.x + obstacle.width &&
                player.x + player.width > obstacle.x &&
                player.y < obstacle.y + obstacle.height &&
                player.y + player.height > obstacle.y) {
              // Game over
              gameOver = true;
              alert('Game Over! Your score: ' + score);
              document.addEventListener('keydown', resetGame);
              document.addEventListener('click', resetGame);
            }
      
            // Remove off-screen obstacles and increase score
            if (obstacle.x + obstacle.width < 0) {
              obstacles.splice(i, 1);
              score++;
              i--;
            }
      
            // Draw obstacle
            ctx.drawImage(obstacleImage, obstacle.x, obstacle.y, obstacle.width, obstacle.height);
          }
      
          // Display score
          ctx.fillStyle = 'white';
          ctx.font = '24px Arial';
          ctx.fillText('Score: ' + score, 10, 20);
      
          requestAnimationFrame(update);
        }
      
        function jump() {
          if (player.grounded) {
            player.dy = player.jumpPower;
            player.grounded = false;
          }
        }
      
        function resetGame() {
          // Reset game variables
          player.x = 50;
          player.y = 300;
          player.dy = 0;
          obstacles = [];
          score = 0;
          gameOver = false;
      
          // Remove event listeners
          document.removeEventListener('keydown', resetGame);
          document.removeEventListener('click', resetGame);
      
          // Restart the game
          update();
        }
      
        document.addEventListener('keydown', function(event) {
          if (event.key === 'ArrowLeft') {
            player.x -= 20;
          } else if (event.key === 'ArrowRight') {
            player.x += 20;
          } else if (event.key === ' ') {
            jump();
          }
        });
      
        setInterval(createObstacle, 2000);
        update();
      </script>
  </body>
</html>